"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[8592],{153:(A,v,n)=>{n.d(v,{x:()=>U});var a=n(2223),s=n(3144),f=n(2980),O=n(8572),d=n(9085),p=n(5775),h=n(4755),c=n(9401),_=n(1299),C=n(1217),b=n(1728),y=n(9114),D=n(8097),L=n(787);const T=["orderInput"];function E(u,o){if(1&u){const r=a.EpF();a.TgZ(0,"mat-option",19),a.NdJ("click",function(){const i=a.CHM(r).$implicit,l=a.oxw();return a.KtG(l.orderOption(i))}),a._uU(1),a.qZA()}if(2&u){const r=o.$implicit;a.Q6J("value",r),a.xp6(1),a.HOy("",r.data.orderId," / ",r.data.clientName?r.data.clientName:r.data.company," / ",r.data.startDate," / ",r.data.place,"")}}let U=(()=>{class u{constructor(r,e,t,i,l){this.http=r,this.authenticationService=e,this.orderDataService=t,this.router=i,this.ocultarSidebarService=l,this.orderFunctionsURL="https://us-central1-highkeystaff.cloudfunctions.net/orders",this.orders=[],this.foundOrder=null}ngOnInit(){this.ocultarSidebarService.ocultarSidebar(),this.data=this.authenticationService.getData();const r=localStorage.getItem("currentUserData");r?this.data=JSON.parse(r):(this.data=this.authenticationService.getData(),localStorage.setItem("currentUserData",JSON.stringify(this.data))),console.log("Datos en storedUserData desde el SearchOrder: ",r),"Client"==this.data.role||("Administrator"==this.data.role||"Executive"==this.data.role?(this.getOrders(),this.getSearchOrders()):"Supervisor"==this.data.role?this.getOrderByIdUser(this.data.email,this.data.hkId):"Employee"==this.data.role&&(this.getOrderByIdUser(this.data.email,this.data.hkId),console.log("Orden por usuario: ",this.getOrderByIdUser(this.data.email,this.data.hkId)))),console.log("Datos usuario: ",this.data)}getOrders(){fetch("https://us-central1-highkeystaff.cloudfunctions.net/orders/getOrders").then(r=>r.json()).then(r=>{this.orders=r,this.orders.sort((e,t)=>t.data.ordNum-e.data.ordNum)}).catch(r=>{console.log(r)})}getOrderByIdUser(r,e){e?fetch(`https://us-central1-highkeystaff.cloudfunctions.net/orders/getOrdersByEmployee?hkId=${e}`).then(t=>t.json()).then(t=>{console.log("Datos de la orden por usuario con highKey: ",t),this.orders=t,this.orders.sort((i,l)=>l.data.ordNum-i.data.ordNum)}).catch(t=>{console.log(t)}):r&&fetch(`https://us-central1-highkeystaff.cloudfunctions.net/orders/getOrdersByEmployee?email=${r}`).then(t=>t.json()).then(t=>{console.log("Datos de la orden por usuario por email: ",t),this.orders=t,this.orders.sort((i,l)=>l.data.ordNum-i.data.ordNum)}).catch(t=>{console.log(t)})}orderOption(r){this.selectedOrder=r,this.orderDataService.setSelectedOrder(r)}onOrderSelection(r){this.selectedOrder=r}navegar(){"Administrator"==this.data.role?this.router.navigate(["/admin/dashboard-lm/"]):"Employee"==this.data.role&&this.router.navigate(["/admin/employees/admin-employees/"])}getSearchOrders(){this.http.get("https://us-central1-highkeystaff.cloudfunctions.net/orders/getOrders").subscribe(e=>{this.ordenes=e})}searchOrder(){let r=this.orderNumber;r=r.replace(/-/g,""),r.length>=4&&(r=r.substring(0,4)+"-"+r.substring(4)),this.orderNumber=r,this.foundOrder=null;for(const e of this.ordenes)if(e.data.orderId===this.orderNumber){this.foundOrder=e;break}this.foundOrder?this.orderDataService.setSelectedOrder(this.foundOrder):console.log("No se encontr\xf3 ning\xfan objeto con el orderId especificado.")}}return u.\u0275fac=function(r){return new(r||u)(a.Y36(s.eN),a.Y36(f.$),a.Y36(O.U),a.Y36(d.F0),a.Y36(p.S))},u.\u0275cmp=a.Xpm({type:u,selectors:[["app-search-order"]],viewQuery:function(r,e){if(1&r&&a.Gf(T,5),2&r){let t;a.iGM(t=a.CRH())&&(e.orderInput=t.first)}},decls:31,vars:6,consts:[[1,"content"],[1,"container","marginContainer",2,"margin-left","10px"],[1,"block-header",2,"margin-top","70px"],[3,"title","active_item"],[1,"row",2,"margin-top","130px"],[1,"col-sm-12","col-md-7","col-lg-7"],[1,"form-label"],[2,"display","inline"],[3,"value","valueChange","selectionChange"],[3,"value","click",4,"ngFor","ngForOf"],[1,"row"],[1,"col-sm-12","col-md-6"],[1,"col-sm-12","col-md-6","col-lg-6",2,"display","inline-flex","width","30%"],["matInput","",3,"ngModel","ngModelChange"],["orderInput",""],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"ocultarImg","col-md-5","col-lg-5",2,"text-align","center"],["src","assets/images/search-order.png","alt","",2,"height","300px"],[2,"color","#414244"],[3,"value","click"]],template:function(r,e){1&r&&(a.TgZ(0,"section",0)(1,"div",1)(2,"div",2),a._UZ(3,"app-breadcrumb",3),a.qZA(),a.TgZ(4,"div",4)(5,"div",5)(6,"div")(7,"label",6),a._uU(8,"List of orders"),a.qZA()(),a.TgZ(9,"mat-form-field",7)(10,"mat-label"),a._uU(11,"Select"),a.qZA(),a.TgZ(12,"mat-select",8),a.NdJ("valueChange",function(i){return e.selectedOrder=i})("selectionChange",function(i){return e.onOrderSelection(i.value)}),a.YNc(13,E,2,5,"mat-option",9),a.qZA()(),a.TgZ(14,"div",10)(15,"div",11)(16,"label",6),a._uU(17,"Order number"),a.qZA()(),a.TgZ(18,"div")(19,"mat-form-field",12)(20,"mat-label"),a._uU(21,"Input"),a.qZA(),a.TgZ(22,"input",13,14),a.NdJ("ngModelChange",function(i){return e.orderNumber=i})("ngModelChange",function(){return e.searchOrder()}),a.qZA()()()(),a.TgZ(24,"div")(25,"button",15),a.NdJ("click",function(){return e.navegar()}),a._uU(26,"Search"),a.qZA()()(),a.TgZ(27,"div",16),a._UZ(28,"img",17),a.qZA(),a.TgZ(29,"p",18),a._uU(30,"You will only be able to view the open orders in which you are a supervisor."),a.qZA()()()()),2&r&&(a.xp6(3),a.Q6J("title","Search Order")("active_item","Search order"),a.xp6(9),a.Q6J("value",e.selectedOrder),a.xp6(1),a.Q6J("ngForOf",e.orders),a.xp6(9),a.Q6J("ngModel",e.orderNumber),a.xp6(3),a.Q6J("disabled",!(e.selectedOrder||e.foundOrder)))},dependencies:[h.sg,c.Fj,c.JJ,c.On,_.L,C.ey,b.lW,y.KE,y.hX,D.Nt,L.gD],styles:['@charset "UTF-8";.label-form[_ngcontent-%COMP%]{font-size:20px}@media (max-width: 576px){.ocultarImg[_ngcontent-%COMP%]{display:none}.marginContainer[_ngcontent-%COMP%]{margin-left:20px!important;padding-left:5px!important;padding-right:5px!important;width:90%}}']}),u})()},7082:(A,v,n)=>{n.d(v,{Y:()=>O});var a=n(9401),s=n(2223),f=n(1728);let O=(()=>{class d{emitFiles(h){const c=h&&h.item(0);this.onChange(c),this.file=c}constructor(h){this.host=h,this.file=null}writeValue(h){this.host.nativeElement.value="",this.file=null}registerOnChange(h){this.onChange=h}registerOnTouched(h){}}return d.\u0275fac=function(h){return new(h||d)(s.Y36(s.SBq))},d.\u0275cmp=s.Xpm({type:d,selectors:[["app-file-upload"]],hostBindings:function(h,c){1&h&&s.NdJ("change",function(C){return c.emitFiles(C.target.files)})},features:[s._Bn([{provide:a.JU,useExisting:d,multi:!0}])],decls:6,vars:1,consts:[[1,"file-drop-area"],["mat-raised-button","","color","primary"],["type","file",1,"file-input"]],template:function(h,c){1&h&&(s.TgZ(0,"div",0)(1,"button",1),s._uU(2,"Choose file"),s.qZA(),s.TgZ(3,"span"),s._uU(4),s.qZA(),s._UZ(5,"input",2),s.qZA()),2&h&&(s.xp6(4),s.Oqu(c.file?c.file.name:" or drag and drop file here"))},dependencies:[f.lW],styles:[".file-drop-area[_ngcontent-%COMP%]{border:1px dashed #7c7db3;border-radius:3px;position:relative;max-width:100%;margin-top:5px;padding:26px 20px 30px;transition:.2s}.file-input[_ngcontent-%COMP%]{position:absolute;left:0;top:0;height:100%;width:100%;cursor:pointer;opacity:0}.file-msg[_ngcontent-%COMP%]{display:inline-block;margin-left:5px;font-size:12px;font-weight:500;color:#5b5bff}"]}),d})()},2054:(A,v,n)=>{n.d(v,{_w:()=>U,Ns:()=>u});var a=n(5861),s=n(2223),f=n(4707),O=n(727),d=n(7579),p=n(4986),h=n(9751),c=n(4482),_=n(5403),C=n(8421),y=n(5963);var L=n(3900);class T{constructor(){this.subject=new f.t(1),this.subscriptions=new O.w0}doFilter(r){this.subject.next(r)}dispose(){this.subscriptions.unsubscribe()}notEmpty(r,e){this.subscriptions.add(this.subject.subscribe(t=>{if(t[r]){const i=t[r].currentValue;null!=i&&e(i)}}))}has(r,e){this.subscriptions.add(this.subject.subscribe(t=>{t[r]&&e(t[r].currentValue)}))}notFirst(r,e){this.subscriptions.add(this.subject.subscribe(t=>{t[r]&&!t[r].isFirstChange()&&e(t[r].currentValue)}))}notFirstAndEmpty(r,e){this.subscriptions.add(this.subject.subscribe(t=>{if(t[r]&&!t[r].isFirstChange()){const i=t[r].currentValue;null!=i&&e(i)}}))}}const E=new s.OlP("NGX_ECHARTS_CONFIG");let U=(()=>{class o{constructor(e,t,i){this.el=t,this.ngZone=i,this.options=null,this.theme=null,this.initOpts=null,this.merge=null,this.autoResize=!0,this.loading=!1,this.loadingType="default",this.loadingOpts=null,this.chartInit=new s.vpe,this.optionsError=new s.vpe,this.chartClick=this.createLazyEvent("click"),this.chartDblClick=this.createLazyEvent("dblclick"),this.chartMouseDown=this.createLazyEvent("mousedown"),this.chartMouseMove=this.createLazyEvent("mousemove"),this.chartMouseUp=this.createLazyEvent("mouseup"),this.chartMouseOver=this.createLazyEvent("mouseover"),this.chartMouseOut=this.createLazyEvent("mouseout"),this.chartGlobalOut=this.createLazyEvent("globalout"),this.chartContextMenu=this.createLazyEvent("contextmenu"),this.chartLegendSelectChanged=this.createLazyEvent("legendselectchanged"),this.chartLegendSelected=this.createLazyEvent("legendselected"),this.chartLegendUnselected=this.createLazyEvent("legendunselected"),this.chartLegendScroll=this.createLazyEvent("legendscroll"),this.chartDataZoom=this.createLazyEvent("datazoom"),this.chartDataRangeSelected=this.createLazyEvent("datarangeselected"),this.chartTimelineChanged=this.createLazyEvent("timelinechanged"),this.chartTimelinePlayChanged=this.createLazyEvent("timelineplaychanged"),this.chartRestore=this.createLazyEvent("restore"),this.chartDataViewChanged=this.createLazyEvent("dataviewchanged"),this.chartMagicTypeChanged=this.createLazyEvent("magictypechanged"),this.chartPieSelectChanged=this.createLazyEvent("pieselectchanged"),this.chartPieSelected=this.createLazyEvent("pieselected"),this.chartPieUnselected=this.createLazyEvent("pieunselected"),this.chartMapSelectChanged=this.createLazyEvent("mapselectchanged"),this.chartMapSelected=this.createLazyEvent("mapselected"),this.chartMapUnselected=this.createLazyEvent("mapunselected"),this.chartAxisAreaSelected=this.createLazyEvent("axisareaselected"),this.chartFocusNodeAdjacency=this.createLazyEvent("focusnodeadjacency"),this.chartUnfocusNodeAdjacency=this.createLazyEvent("unfocusnodeadjacency"),this.chartBrush=this.createLazyEvent("brush"),this.chartBrushEnd=this.createLazyEvent("brushend"),this.chartBrushSelected=this.createLazyEvent("brushselected"),this.chartRendered=this.createLazyEvent("rendered"),this.chartFinished=this.createLazyEvent("finished"),this.animationFrameID=null,this.chart$=new f.t(1),this.resize$=new d.x,this.changeFilter=new T,this.echarts=e.echarts}ngOnChanges(e){this.changeFilter.doFilter(e)}ngOnInit(){if(!window.ResizeObserver)throw new Error("please install a polyfill for ResizeObserver");this.resizeSub=this.resize$.pipe(function D(o,r=p.z,e){const t=(0,y.H)(o,r);return function b(o,r){return(0,c.e)((e,t)=>{const{leading:i=!0,trailing:l=!1}=r??{};let M=!1,z=null,g=null,S=!1;const I=()=>{g?.unsubscribe(),g=null,l&&(F(),S&&t.complete())},x=()=>{g=null,S&&t.complete()},P=m=>g=(0,C.Xf)(o(m)).subscribe((0,_.x)(t,I,x)),F=()=>{if(M){M=!1;const m=z;z=null,t.next(m),!S&&P(m)}};e.subscribe((0,_.x)(t,m=>{M=!0,z=m,(!g||g.closed)&&(i?F():P(m))},()=>{S=!0,(!(l&&M&&g)||g.closed)&&t.complete()}))})}(()=>t,e)}(100,p.z,{leading:!1,trailing:!0})).subscribe(()=>this.resize()),this.autoResize&&(this.resizeOb=this.ngZone.runOutsideAngular(()=>new window.ResizeObserver(()=>{this.animationFrameID=window.requestAnimationFrame(()=>this.resize$.next())})),this.resizeOb.observe(this.el.nativeElement)),this.changeFilter.notFirstAndEmpty("options",e=>this.onOptionsChange(e)),this.changeFilter.notFirstAndEmpty("merge",e=>this.setOption(e)),this.changeFilter.has("loading",e=>this.toggleLoading(!!e)),this.changeFilter.notFirst("theme",()=>this.refreshChart())}ngOnDestroy(){window.clearTimeout(this.initChartTimer),this.resizeSub&&this.resizeSub.unsubscribe(),this.animationFrameID&&window.cancelAnimationFrame(this.animationFrameID),this.resizeOb&&this.resizeOb.unobserve(this.el.nativeElement),this.loadingSub&&this.loadingSub.unsubscribe(),this.changeFilter.dispose(),this.dispose()}ngAfterViewInit(){this.initChartTimer=window.setTimeout(()=>this.initChart())}dispose(){this.chart&&(this.chart.isDisposed()||this.chart.dispose(),this.chart=null)}resize(){this.chart&&this.chart.resize()}toggleLoading(e){this.chart?e?this.chart.showLoading(this.loadingType,this.loadingOpts):this.chart.hideLoading():this.loadingSub=this.chart$.subscribe(t=>e?t.showLoading(this.loadingType,this.loadingOpts):t.hideLoading())}setOption(e,t){if(this.chart)try{this.chart.setOption(e,t)}catch(i){console.error(i),this.optionsError.emit(i)}}refreshChart(){var e=this;return(0,a.Z)(function*(){e.dispose(),yield e.initChart()})()}createChart(){const e=this.el.nativeElement;if(window&&window.getComputedStyle){const t=window.getComputedStyle(e,null).getPropertyValue("height");(!t||"0px"===t)&&(!e.style.height||"0px"===e.style.height)&&(e.style.height="400px")}return this.ngZone.runOutsideAngular(()=>("function"==typeof this.echarts?this.echarts:()=>Promise.resolve(this.echarts))().then(({init:i})=>i(e,this.theme,this.initOpts)))}initChart(){var e=this;return(0,a.Z)(function*(){yield e.onOptionsChange(e.options),e.merge&&e.chart&&e.setOption(e.merge)})()}onOptionsChange(e){var t=this;return(0,a.Z)(function*(){e&&(t.chart||(t.chart=yield t.createChart(),t.chart$.next(t.chart),t.chartInit.emit(t.chart)),t.setOption(t.options,!0))})()}createLazyEvent(e){return this.chartInit.pipe((0,L.w)(t=>new h.y(i=>(t.on(e,l=>this.ngZone.run(()=>i.next(l))),()=>{this.chart&&(this.chart.isDisposed()||t.off(e))}))))}}return o.\u0275fac=function(e){return new(e||o)(s.Y36(E),s.Y36(s.SBq),s.Y36(s.R0b))},o.\u0275dir=s.lG2({type:o,selectors:[["echarts"],["","echarts",""]],inputs:{options:"options",theme:"theme",initOpts:"initOpts",merge:"merge",autoResize:"autoResize",loading:"loading",loadingType:"loadingType",loadingOpts:"loadingOpts"},outputs:{chartInit:"chartInit",optionsError:"optionsError",chartClick:"chartClick",chartDblClick:"chartDblClick",chartMouseDown:"chartMouseDown",chartMouseMove:"chartMouseMove",chartMouseUp:"chartMouseUp",chartMouseOver:"chartMouseOver",chartMouseOut:"chartMouseOut",chartGlobalOut:"chartGlobalOut",chartContextMenu:"chartContextMenu",chartLegendSelectChanged:"chartLegendSelectChanged",chartLegendSelected:"chartLegendSelected",chartLegendUnselected:"chartLegendUnselected",chartLegendScroll:"chartLegendScroll",chartDataZoom:"chartDataZoom",chartDataRangeSelected:"chartDataRangeSelected",chartTimelineChanged:"chartTimelineChanged",chartTimelinePlayChanged:"chartTimelinePlayChanged",chartRestore:"chartRestore",chartDataViewChanged:"chartDataViewChanged",chartMagicTypeChanged:"chartMagicTypeChanged",chartPieSelectChanged:"chartPieSelectChanged",chartPieSelected:"chartPieSelected",chartPieUnselected:"chartPieUnselected",chartMapSelectChanged:"chartMapSelectChanged",chartMapSelected:"chartMapSelected",chartMapUnselected:"chartMapUnselected",chartAxisAreaSelected:"chartAxisAreaSelected",chartFocusNodeAdjacency:"chartFocusNodeAdjacency",chartUnfocusNodeAdjacency:"chartUnfocusNodeAdjacency",chartBrush:"chartBrush",chartBrushEnd:"chartBrushEnd",chartBrushSelected:"chartBrushSelected",chartRendered:"chartRendered",chartFinished:"chartFinished"},exportAs:["echarts"],features:[s.TTD]}),o})(),u=(()=>{class o{static forRoot(e){return{ngModule:o,providers:[{provide:E,useValue:e}]}}static forChild(){return{ngModule:o}}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=s.oAB({type:o}),o.\u0275inj=s.cJS({}),o})()}}]);
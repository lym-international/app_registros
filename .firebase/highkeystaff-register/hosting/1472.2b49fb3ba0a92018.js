"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[1472],{1472:(b,g,r)=>{r.r(g),r.d(g,{DashboardLmModule:()=>D});var a=r(4755),p=r(9401),v=r(5626),l=r(8629),Z=r(9085),t=r(2223),c=r(8572),f=r(1299),u=r(6012),O=r(7081),U=r(3649),C=r(4365);function T(i,h){if(1&i&&(t.TgZ(0,"tr")(1,"td",48),t._uU(2),t.qZA(),t.TgZ(3,"td",48),t._uU(4),t.qZA(),t.TgZ(5,"td",48),t._uU(6),t.qZA(),t.TgZ(7,"td",48),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t._UZ(11,"mat-progress-bar",55),t.qZA(),t.TgZ(12,"td",48),t._uU(13),t.qZA(),t.TgZ(14,"td"),t._uU(15),t._UZ(16,"mat-progress-bar",56),t.qZA(),t.TgZ(17,"td",48),t._uU(18),t.qZA(),t.TgZ(19,"td"),t._uU(20),t._UZ(21,"mat-progress-bar",57),t.qZA(),t.TgZ(22,"td",48),t._uU(23),t.qZA()()),2&i){const o=t.oxw().$implicit,e=t.oxw();t.xp6(2),t.Oqu(o.position),t.xp6(2),t.Oqu(o.hourFrom),t.xp6(2),t.Oqu(o.quantity),t.xp6(2),t.Oqu(o.m),t.xp6(2),t.hij(" ",(o.m/o.quantity*100).toFixed(0)," % "),t.xp6(1),t.s9C("value",o.m/o.quantity*100),t.xp6(2),t.Oqu(e.checkinValues[o.position][o.hourFrom]),t.xp6(2),t.hij(" ",(e.checkinValues[o.position][o.hourFrom]/o.m*100).toFixed(0)," % "),t.xp6(1),t.s9C("value",e.checkinValues[o.position][o.hourFrom]/o.m*100),t.xp6(2),t.Oqu(e.checkOutValues[o.position][o.hourFrom]),t.xp6(2),t.hij(" ",(e.checkOutValues[o.position][o.hourFrom]/e.checkinValues[o.position][o.hourFrom]*100).toFixed(0)," % "),t.xp6(1),t.s9C("value",e.checkOutValues[o.position][o.hourFrom]/e.checkinValues[o.position][o.hourFrom]*100),t.xp6(2),t.Oqu(e.noShowValues[o.position][o.hourFrom])}}function q(i,h){if(1&i&&(t.ynx(0),t.YNc(1,T,24,13,"tr",54),t.BQk()),2&i){const o=h.$implicit;t.xp6(1),t.Q6J("ngIf",0!==o.m)}}const k=[{path:"",component:(()=>{class i{constructor(o){this.orderDataService=o,this.totalRequest=0,this.porcentajeCheckIn=0,this.porcentajeCheckOut=0,this.porcentajeNoshow=0,this.totalRequeridos=0,this.dataItems=[],this.checkinValues={},this.checkOutValues={},this.noShowValues={}}ngOnInit(){this.dataOrder=this.orderDataService.getSelectedOrder(),console.log("Data: ",this.dataOrder),this.orderId=this.dataOrder.id,console.log("OrderID ===>",this.orderId),this.getRegistByOrder(),this.getTotalRequest()}getTotalRequest(){this.dataOrder.data.items&&this.dataOrder.data.items.forEach(e=>{this.totalRequest+=e.quantity}),console.log("Requested: ",this.dataOrder.data.items),this.dataItems=this.dataOrder.data.items;const o={};this.dataOrder.data.items.forEach(e=>{0!==e.m&&!o[e.position]&&(o[e.position]=!0,console.log("primera position",e.position))}),this.totalRequeridos=Object.keys(o).length}getRegistByOrder(){fetch(`https://us-central1-highkeystaff.cloudfunctions.net/registrations/registbyOrder/orderId?orderId=${this.orderId}`).then(o=>o.json()).then(o=>{console.log("Id Data: ",o.employees),this.checkIn=o.employees.filter(n=>!0===n.checkin).length,this.checkOut=o.employees.filter(n=>!0===n.checkout).length,this.noShow=o.employees.filter(n=>"No show"===n.status).length,this.totalConfirmed=o.employees.filter(n=>"Confirmed"===n.employee.status).length,this.porcentajes(this.checkIn,this.checkOut,this.noShow,this.totalConfirmed,this.totalRequest);const e={};o.employees.forEach(n=>{const s=n.position,d=n.hourFrom;e[s]||(e[s]={name:s,hours:{}}),e[s].hours[d]||(e[s].hours[d]={totalCheckin:0,totalCheckout:0,totalnoShow:0}),n.checkin&&e[s].hours[d].totalCheckin++,n.checkout&&e[s].hours[d].totalCheckout++,"No show"==n.status&&e[s].hours[d].totalnoShow++}),this.checkinValues={},this.checkOutValues={},this.noShowValues={};for(const n in e){const s=e[n];console.log(`Posici\xf3n: ${s.name}`);for(const d in s.hours){const m=s.hours[d];console.log(`Hora inicial: ${d}`),this.checkinValues[n]||(this.checkinValues[n]={}),this.checkOutValues[n]||(this.checkOutValues[n]={}),this.noShowValues[n]||(this.noShowValues[n]={}),void 0!==m.totalCheckin?(this.checkinValues[n][d]=m.totalCheckin,console.log(`Total de check-in: ${m.totalCheckin}`)):(this.checkinValues[n][d]=0,console.log("Total de check-in: 0")),void 0!==m.totalCheckout?(this.checkOutValues[n][d]=m.totalCheckout,console.log(`Total de check-out: ${m.totalCheckout}`)):console.log("Total de check-out: 0"),void 0!==m.totalnoShow?(this.noShowValues[n][d]=m.totalnoShow,console.log(`Total de noShow: ${m.totalnoShow}`)):(this.noShowValues[n][d]=0,console.log("Total de noShow: 0")),console.log("---")}}}).catch(o=>{console.log(o)})}porcentajes(o,e,n,s,d){0!==this.totalConfirmed?(this.porcentajeCheckIn=Math.round(o/s*100),this.porcentajeCheckOut=Math.round(e/o*100),this.porcentajeNoshow=Math.round(n/s*100),this.porcentajeConfirmed=Math.round(s/d*100),console.log("Porcentaje checkIn: ",this.porcentajeCheckIn),console.log("Porcentaje checkOut: ",this.porcentajeCheckOut),console.log("Porcentaje Noshow: ",this.porcentajeNoshow),console.log("Porcentaje confirmed: ",this.porcentajeConfirmed)):console.log("No es posible calcular los porcentajes. totalConfirmed es cero.")}}return i.\u0275fac=function(o){return new(o||i)(t.Y36(c.U))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-dashboard-lm"]],decls:145,vars:21,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","active_item"],[1,"container"],[1,"column",2,"padding-top","40px"],[1,"card"],[1,"card-statistic-3"],[1,"card-icon","card-icon-large"],[1,"fa","fa-globe"],[1,"tarjeta"],[2,"font-size","large","color","#1A202E","font-weight","700"],[1,"column",2,"margin","auto"],[1,"sub-column"],[1,"sub-sub-column"],[1,"tarjeta-pequena"],[2,"color","#004676","width","50%","margin","70px auto 70px auto"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12",2,"text-align","center"],[1,"",2,"background-color","#1A202E","color","white","font-size","large","border-radius","8px"],[1,"row"],[1,"col-xl-3","col-lg-6","tarjeta-indicadores"],[1,"card","l-bg-green-dark"],[1,"card-statistic-3",2,"padding-bottom","70px"],[1,"fa","fa-briefcase"],[1,"card-content"],[1,"card-title"],[1,"data-1",2,"padding-bottom","50px"],[1,"card","l-bg-cyan-dark"],[1,"fa","fa-check"],[1,"data-1"],["mode","determinate",1,"progress-m","progress-round","progress-shadow","orange-progress","mt-2","mb-2",3,"value"],[1,"card","l-bg-purple-dark"],["mode","determinate",1,"progress-m","progress-round","progress-shadow","green-progress","mt-2","mb-2",3,"value"],[1,"card","l-bg-orange-dark"],["mode","determinate",1,"progress-m","progress-round","progress-shadow","sky-progress","mt-2","mb-2",3,"value"],["mode","determinate",1,"progress-m","progress-round","progress-shadow","violet-progress","mt-2","mb-2",3,"value"],[2,"color","#004676","width","50%","margin","50px auto 70px auto"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12",2,"padding-right","0px","text-align","center"],[1,"col-xl-2","col-lg-2","col-md-12","col-sm-12",2,"padding-right","0px","text-align","center"],[1,"",2,"background","linear-gradient(135deg, #051e2f 60%, rgb(30, 168, 255) 100%)","color","white","font-size","medium","border-radius","8px"],[1,"row","clearfix",2,"margin-right","0px","margin-left","0px"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12"],[1,"header"],[2,"color","#1A202E"],["visibility","hover",2,"height","410px"],[1,"tableBody"],[1,"responsive_table"],[1,"table","table-hover"],[1,"column-check"],["matTooltip","CheckIn time",1,"column-check"],["matTooltip","(Confirmed/Required)*100",1,"column-check"],["matTooltip","(CheckIn/Confirmed)*100",1,"column-check"],["matTooltip","(CheckOut/CheckIn)*100",1,"column-check"],[4,"ngFor","ngForOf"],[4,"ngIf"],["mode","determinate",1,"progress-round","violet-progress",3,"value"],["mode","determinate",1,"progress-round","green-progress",3,"value"],["mode","determinate",1,"progress-round","orange-progress",3,"value"]],template:function(o,e){1&o&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2),t._UZ(3,"app-breadcrumb",3),t.qZA(),t.TgZ(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8),t._UZ(9,"i",9),t.qZA(),t.TgZ(10,"div",10)(11,"span",11),t._uU(12),t.qZA(),t._UZ(13,"br")(14,"br"),t._uU(15),t._UZ(16,"br")(17,"br"),t._uU(18),t._UZ(19,"br")(20,"br"),t._uU(21),t.qZA()()()(),t.TgZ(22,"div",12)(23,"div",13)(24,"div",14)(25,"mat-card",15)(26,"mat-card-content")(27,"mat-card-title"),t._uU(28,"Order number"),t.qZA(),t._uU(29),t.qZA()()(),t.TgZ(30,"div",14)(31,"mat-card",15)(32,"mat-card-content")(33,"mat-card-title"),t._uU(34,"Event date"),t.qZA(),t._uU(35),t.qZA()()()()()(),t._UZ(36,"hr",16),t.TgZ(37,"div",17)(38,"mat-card",18)(39,"mat-card-content")(40,"mat-card-title"),t._uU(41,"E M P L O Y E E S"),t.qZA()()()(),t._UZ(42,"br"),t.TgZ(43,"div",19)(44,"div",20)(45,"div",21)(46,"div",22)(47,"div",8),t._UZ(48,"i",23),t.qZA(),t.TgZ(49,"div",24)(50,"h4",25),t._uU(51,"Requested"),t.qZA(),t.TgZ(52,"span",26),t._uU(53),t.qZA()()()()(),t.TgZ(54,"div",20)(55,"div",27)(56,"div",7)(57,"div",8),t._UZ(58,"i",28),t.qZA(),t.TgZ(59,"div",24)(60,"h4",25),t._uU(61,"Confirmed"),t.qZA(),t.TgZ(62,"span",29),t._uU(63),t.qZA(),t._UZ(64,"mat-progress-bar",30),t.qZA()()()(),t.TgZ(65,"div",20)(66,"div",31)(67,"div",7)(68,"div",8),t._UZ(69,"i",28),t.qZA(),t.TgZ(70,"div",24)(71,"h4",25),t._uU(72,"CheckIn"),t.qZA(),t.TgZ(73,"span",29),t._uU(74),t.qZA(),t._UZ(75,"mat-progress-bar",32),t.qZA()()()(),t.TgZ(76,"div",20)(77,"div",33)(78,"div",7)(79,"div",8),t._UZ(80,"i",28),t.qZA(),t.TgZ(81,"div",24)(82,"h4",25),t._uU(83,"CheckOut"),t.qZA(),t.TgZ(84,"span",29),t._uU(85),t.qZA(),t._UZ(86,"mat-progress-bar",34),t.qZA()()()(),t.TgZ(87,"div",20)(88,"div",27)(89,"div",7)(90,"div",8),t._UZ(91,"i",28),t.qZA(),t.TgZ(92,"div",24)(93,"h4",25),t._uU(94,"Noshow"),t.qZA(),t.TgZ(95,"span",29),t._uU(96),t.qZA(),t._UZ(97,"mat-progress-bar",35),t.qZA()()()()(),t._UZ(98,"hr",36),t.TgZ(99,"div",37)(100,"mat-card",18)(101,"mat-card-content")(102,"mat-card-title"),t._uU(103,"P O S I T I O N S"),t.qZA()()()(),t._UZ(104,"br"),t.TgZ(105,"div",38)(106,"mat-card",39)(107,"mat-card-content")(108,"mat-card-title"),t._uU(109),t.qZA()()()(),t._UZ(110,"br"),t.TgZ(111,"div",40)(112,"div",41)(113,"div",6)(114,"div",42)(115,"h2",43),t._uU(116,"Complience by position, hours and employees"),t.qZA()(),t.TgZ(117,"ng-scrollbar",44)(118,"div",45)(119,"div",46)(120,"table",47)(121,"thead")(122,"tr")(123,"th",48),t._uU(124,"Position"),t.qZA(),t.TgZ(125,"th",49),t._uU(126,"Time"),t.qZA(),t.TgZ(127,"th",48),t._uU(128,"Required"),t.qZA(),t.TgZ(129,"th",48),t._uU(130,"Confirmed"),t.qZA(),t.TgZ(131,"th",50),t._uU(132,"Confirmed %"),t.qZA(),t.TgZ(133,"th",48),t._uU(134,"CheckIn"),t.qZA(),t.TgZ(135,"th",51),t._uU(136,"CheckIn %"),t.qZA(),t.TgZ(137,"th",48),t._uU(138,"CheckOut"),t.qZA(),t.TgZ(139,"th",52),t._uU(140,"CheckOut %"),t.qZA(),t.TgZ(141,"th",48),t._uU(142,"Noshow"),t.qZA()()(),t.TgZ(143,"tbody"),t.YNc(144,q,2,1,"ng-container",53),t.qZA()()()()()()()()()()),2&o&&(t.xp6(3),t.Q6J("title","Dashboard")("active_item","Dashboard"),t.xp6(9),t.Oqu(e.dataOrder.data.clientName),t.xp6(3),t.hij(" ",e.dataOrder.data.place," "),t.xp6(3),t.hij(" ",e.dataOrder.data.address," "),t.xp6(3),t.lnq(" ",e.dataOrder.data.city," ",e.dataOrder.data.state," ",e.dataOrder.data.zipcode," "),t.xp6(8),t.hij(" ",e.dataOrder.data.orderId," "),t.xp6(6),t.hij(" ",e.dataOrder.data.startDate," "),t.xp6(18),t.Oqu(e.totalRequest),t.xp6(10),t.Oqu(e.totalConfirmed),t.xp6(1),t.s9C("value",e.porcentajeConfirmed),t.xp6(10),t.Oqu(e.checkIn),t.xp6(1),t.s9C("value",e.porcentajeCheckIn),t.xp6(10),t.Oqu(e.checkOut),t.xp6(1),t.s9C("value",e.porcentajeCheckOut),t.xp6(10),t.Oqu(e.noShow),t.xp6(1),t.s9C("value",e.porcentajeNoshow),t.xp6(12),t.hij("Required: ",e.totalRequeridos,""),t.xp6(35),t.Q6J("ngForOf",e.dataItems))},dependencies:[a.sg,a.O5,f.L,u.a8,u.dn,u.n5,O.pW,U.gM,C.KC],styles:[".tarjeta[_ngcontent-%COMP%]{margin:20px 0;width:80%;color:#5b626b;font-weight:500;font-size:medium}.tarjeta-pequena[_ngcontent-%COMP%]{margin:20px 0;color:#fff;font-weight:500;background:linear-gradient(135deg,#051e2f 60%,rgb(30,168,255) 100%)}.tarjeta-indicadores[_ngcontent-%COMP%]{margin:auto;width:20%}.container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:10px;padding-left:100px;padding-right:100px}.column[_ngcontent-%COMP%]{padding:10px;vertical-align:super}.sub-column[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:10px}.sub-sub-column[_ngcontent-%COMP%]{display:grid;padding:20px}.column-check[_ngcontent-%COMP%]{text-align:center}@media (min-width: 767px){.content-block[_ngcontent-%COMP%]{width:100%;padding:10px}.container[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr}.sub-columns[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.contenedorSM[_ngcontent-%COMP%]{padding-left:5px!important;padding-right:5px!important;margin-left:0!important;margin-right:0!important}}"]}),i})()}];let A=(()=>{class i{}return i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[Z.Bz.forChild(k),Z.Bz]}),i})();var _=r(6205),x=r(787),j=r(8097),M=r(9114);let D=(()=>{class i{}return i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[c.U],imports:[a.ez,p.u5,p.UX,v.K,l.m,A,M.lN,j.c,x.LD,_.X,C.kb]}),i})()},1299:(b,g,r)=>{r.d(g,{L:()=>t});var a=r(2223),p=r(4755),v=r(9085),l=r(1676);function Z(c,f){if(1&c&&(a.TgZ(0,"li",11),a._uU(1),a.qZA()),2&c){const u=f.$implicit;a.xp6(1),a.Oqu(u)}}let t=(()=>{class c{constructor(){}}return c.\u0275fac=function(u){return new(u||c)},c.\u0275cmp=a.Xpm({type:c,selectors:[["app-breadcrumb"]],inputs:{title:"title",items:"items",active_item:"active_item"},decls:14,vars:7,consts:[[1,"breadcrumb-main"],[1,"row"],[1,"col-6"],[1,"breadcrumb-title"],[1,"page-title"],[1,"breadcrumb-list"],[1,"breadcrumb-item","bcrumb-1"],[3,"routerLink"],[3,"icon"],["class","breadcrumb-item",4,"ngFor","ngForOf"],[1,"breadcrumb-item","active"],[1,"breadcrumb-item"]],template:function(u,O){1&u&&(a.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4),a._uU(5),a.qZA()()(),a.TgZ(6,"div",2)(7,"ul",5)(8,"li",6)(9,"a",7),a._UZ(10,"app-feather-icons",8),a.qZA()(),a.YNc(11,Z,2,1,"li",9),a.TgZ(12,"li",10),a._uU(13),a.qZA()()()()()),2&u&&(a.xp6(5),a.Oqu(O.title),a.xp6(4),a.Q6J("routerLink","/admin/search-order"),a.xp6(1),a.Tol("breadcrumb-icon"),a.Q6J("icon","home"),a.xp6(1),a.Q6J("ngForOf",O.items),a.xp6(2),a.Oqu(O.active_item))},dependencies:[p.sg,v.rH,l.A]}),c})()},5626:(b,g,r)=>{r.d(g,{K:()=>v});var a=r(8629),p=r(2223);let v=(()=>{class l{}return l.\u0275fac=function(t){return new(t||l)},l.\u0275mod=p.oAB({type:l}),l.\u0275inj=p.cJS({imports:[a.m]}),l})()}}]);
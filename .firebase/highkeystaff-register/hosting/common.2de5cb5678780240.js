"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[8592],{8572:(b,m,n)=>{n.d(m,{U:()=>s});var t=n(2223);let s=(()=>{class l{constructor(){this.storageKey="selectedOrder"}setSelectedOrder(c){localStorage.setItem(this.storageKey,JSON.stringify(c))}getSelectedOrder(){const c=localStorage.getItem(this.storageKey);return c?JSON.parse(c):null}}return l.\u0275fac=function(c){return new(c||l)},l.\u0275prov=t.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()},153:(b,m,n)=>{n.d(m,{x:()=>C});var t=n(2223),s=n(3144),l=n(2980),f=n(8572),c=n(9085),p=n(5775),h=n(4755),d=n(9401),_=n(1299),y=n(1217),L=n(1728),E=n(9114),T=n(8097),U=n(787);function z(u,O){if(1&u){const a=t.EpF();t.TgZ(0,"mat-option",18),t.NdJ("click",function(){const r=t.CHM(a).$implicit,o=t.oxw();return t.KtG(o.orderOption(r))}),t._uU(1),t.qZA()}if(2&u){const a=O.$implicit;t.Q6J("value",a),t.xp6(1),t.HOy("",a.data.orderId," / ",a.data.clientName?a.data.clientName:a.data.company," / ",a.data.startDate," / ",a.data.place,"")}}let C=(()=>{class u{constructor(a,i,e,r,o){this.http=a,this.authenticationService=i,this.orderDataService=e,this.router=r,this.ocultarSidebarService=o,this.orderFunctionsURL="https://us-central1-highkeystaff.cloudfunctions.net/orders",this.orders=[],this.foundOrder=null}ngOnInit(){this.ocultarSidebarService.ocultarSidebar(),this.data=this.authenticationService.getData();const a=localStorage.getItem("currentUserData");a?this.data=JSON.parse(a):(this.data=this.authenticationService.getData(),localStorage.setItem("currentUserData",JSON.stringify(this.data))),console.log("Datos en storedUserData desde el SearchOrder: ",a),"Client"==this.data.role||("Administrator"==this.data.role||"Executive"==this.data.role?(this.getOrders(),this.getSearchOrders()):"Supervisor"==this.data.role?this.getOrderByIdUser(this.data.email,this.data.hkId):"Employee"==this.data.role&&(this.getOrderByIdUser(this.data.email,this.data.hkId),console.log("Orden por usuario: ",this.getOrderByIdUser(this.data.email,this.data.hkId)))),console.log("Datos usuario: ",this.data)}getOrders(){fetch("https://us-central1-highkeystaff.cloudfunctions.net/orders/getOrders").then(a=>a.json()).then(a=>{this.orders=a,this.orders.sort((i,e)=>e.data.ordNum-i.data.ordNum)}).catch(a=>{console.log(a)})}getOrderByIdUser(a,i){i?fetch(`https://us-central1-highkeystaff.cloudfunctions.net/orders/getOrdersByEmployee?hkId=${i}`).then(e=>e.json()).then(e=>{console.log("Datos de la orden por usuario con highKey: ",e),this.orders=e,this.orders.sort((r,o)=>o.data.ordNum-r.data.ordNum)}).catch(e=>{console.log(e)}):a&&fetch(`https://us-central1-highkeystaff.cloudfunctions.net/orders/getOrdersByEmployee?email=${a}`).then(e=>e.json()).then(e=>{console.log("Datos de la orden por usuario por email: ",e),this.orders=e,this.orders.sort((r,o)=>o.data.ordNum-r.data.ordNum)}).catch(e=>{console.log(e)})}orderOption(a){this.selectedOrder=a,this.orderDataService.setSelectedOrder(a)}onOrderSelection(a){this.selectedOrder=a}navegar(){"Administrator"==this.data.role?this.router.navigate(["/admin/dashboard-lm/"]):"Employee"==this.data.role&&this.router.navigate(["/admin/employees/admin-employees/"])}getSearchOrders(){this.http.get("https://us-central1-highkeystaff.cloudfunctions.net/orders/getOrders").subscribe(i=>{this.ordenes=i})}searchOrder(){this.foundOrder=null;for(const a of this.ordenes)if(a.data.orderId===this.orderNumber){this.foundOrder=a;break}this.foundOrder?this.orderDataService.setSelectedOrder(this.foundOrder):console.log("No se encontr\xf3 ning\xfan objeto con el orderId especificado.")}}return u.\u0275fac=function(a){return new(a||u)(t.Y36(s.eN),t.Y36(l.$),t.Y36(f.U),t.Y36(c.F0),t.Y36(p.S))},u.\u0275cmp=t.Xpm({type:u,selectors:[["app-search-order"]],decls:30,vars:6,consts:[[1,"content"],[1,"container","marginContainer",2,"margin-left","10px"],[1,"block-header",2,"margin-top","70px"],[3,"title","active_item"],[1,"row",2,"margin-top","130px"],[1,"col-sm-12","col-md-7","col-lg-7"],[1,"form-label"],[2,"display","inline"],[3,"value","valueChange","selectionChange"],[3,"value","click",4,"ngFor","ngForOf"],[1,"row"],[1,"col-sm-12","col-md-6"],[1,"col-sm-12","col-md-6","col-lg-6",2,"display","inline-flex","width","30%"],["matInput","",3,"ngModel","ngModelChange"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"ocultarImg","col-md-5","col-lg-5",2,"text-align","center"],["src","assets/images/search-order.png","alt","",2,"height","300px"],[2,"color","#414244"],[3,"value","click"]],template:function(a,i){1&a&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2),t._UZ(3,"app-breadcrumb",3),t.qZA(),t.TgZ(4,"div",4)(5,"div",5)(6,"div")(7,"label",6),t._uU(8,"List of orders"),t.qZA()(),t.TgZ(9,"mat-form-field",7)(10,"mat-label"),t._uU(11,"Select"),t.qZA(),t.TgZ(12,"mat-select",8),t.NdJ("valueChange",function(r){return i.selectedOrder=r})("selectionChange",function(r){return i.onOrderSelection(r.value)}),t.YNc(13,z,2,5,"mat-option",9),t.qZA()(),t.TgZ(14,"div",10)(15,"div",11)(16,"label",6),t._uU(17,"Order number"),t.qZA()(),t.TgZ(18,"div")(19,"mat-form-field",12)(20,"mat-label"),t._uU(21,"Input"),t.qZA(),t.TgZ(22,"input",13),t.NdJ("ngModelChange",function(r){return i.orderNumber=r})("ngModelChange",function(){return i.searchOrder()}),t.qZA()()()(),t.TgZ(23,"div")(24,"button",14),t.NdJ("click",function(){return i.navegar()}),t._uU(25,"Search"),t.qZA()()(),t.TgZ(26,"div",15),t._UZ(27,"img",16),t.qZA(),t.TgZ(28,"p",17),t._uU(29,"You will only be able to view the open orders in which you are a supervisor."),t.qZA()()()()),2&a&&(t.xp6(3),t.Q6J("title","Search Order")("active_item","Search order"),t.xp6(9),t.Q6J("value",i.selectedOrder),t.xp6(1),t.Q6J("ngForOf",i.orders),t.xp6(9),t.Q6J("ngModel",i.orderNumber),t.xp6(2),t.Q6J("disabled",!(i.selectedOrder||i.foundOrder)))},dependencies:[h.sg,d.Fj,d.JJ,d.On,_.L,y.ey,L.lW,E.KE,E.hX,T.Nt,U.gD],styles:['@charset "UTF-8";.label-form[_ngcontent-%COMP%]{font-size:20px}@media (max-width: 576px){.ocultarImg[_ngcontent-%COMP%]{display:none}.marginContainer[_ngcontent-%COMP%]{margin-left:20px!important;padding-left:5px!important;padding-right:5px!important;width:90%}}']}),u})()},7082:(b,m,n)=>{n.d(m,{Y:()=>f});var t=n(9401),s=n(2223),l=n(1728);let f=(()=>{class c{emitFiles(h){const d=h&&h.item(0);this.onChange(d),this.file=d}constructor(h){this.host=h,this.file=null}writeValue(h){this.host.nativeElement.value="",this.file=null}registerOnChange(h){this.onChange=h}registerOnTouched(h){}}return c.\u0275fac=function(h){return new(h||c)(s.Y36(s.SBq))},c.\u0275cmp=s.Xpm({type:c,selectors:[["app-file-upload"]],hostBindings:function(h,d){1&h&&s.NdJ("change",function(y){return d.emitFiles(y.target.files)})},features:[s._Bn([{provide:t.JU,useExisting:c,multi:!0}])],decls:6,vars:1,consts:[[1,"file-drop-area"],["mat-raised-button","","color","primary"],["type","file",1,"file-input"]],template:function(h,d){1&h&&(s.TgZ(0,"div",0)(1,"button",1),s._uU(2,"Choose file"),s.qZA(),s.TgZ(3,"span"),s._uU(4),s.qZA(),s._UZ(5,"input",2),s.qZA()),2&h&&(s.xp6(4),s.Oqu(d.file?d.file.name:" or drag and drop file here"))},dependencies:[l.lW],styles:[".file-drop-area[_ngcontent-%COMP%]{border:1px dashed #7c7db3;border-radius:3px;position:relative;max-width:100%;margin-top:5px;padding:26px 20px 30px;transition:.2s}.file-input[_ngcontent-%COMP%]{position:absolute;left:0;top:0;height:100%;width:100%;cursor:pointer;opacity:0}.file-msg[_ngcontent-%COMP%]{display:inline-block;margin-left:5px;font-size:12px;font-weight:500;color:#5b5bff}"]}),c})()},2054:(b,m,n)=>{n.d(m,{_w:()=>u,Ns:()=>O});var t=n(5861),s=n(2223),l=n(4707),f=n(727),c=n(7579),p=n(4986),h=n(9751),d=n(4482),_=n(5403),y=n(8421),E=n(5963);var U=n(3900);class z{constructor(){this.subject=new l.t(1),this.subscriptions=new f.w0}doFilter(i){this.subject.next(i)}dispose(){this.subscriptions.unsubscribe()}notEmpty(i,e){this.subscriptions.add(this.subject.subscribe(r=>{if(r[i]){const o=r[i].currentValue;null!=o&&e(o)}}))}has(i,e){this.subscriptions.add(this.subject.subscribe(r=>{r[i]&&e(r[i].currentValue)}))}notFirst(i,e){this.subscriptions.add(this.subject.subscribe(r=>{r[i]&&!r[i].isFirstChange()&&e(r[i].currentValue)}))}notFirstAndEmpty(i,e){this.subscriptions.add(this.subject.subscribe(r=>{if(r[i]&&!r[i].isFirstChange()){const o=r[i].currentValue;null!=o&&e(o)}}))}}const C=new s.OlP("NGX_ECHARTS_CONFIG");let u=(()=>{class a{constructor(e,r,o){this.el=r,this.ngZone=o,this.options=null,this.theme=null,this.initOpts=null,this.merge=null,this.autoResize=!0,this.loading=!1,this.loadingType="default",this.loadingOpts=null,this.chartInit=new s.vpe,this.optionsError=new s.vpe,this.chartClick=this.createLazyEvent("click"),this.chartDblClick=this.createLazyEvent("dblclick"),this.chartMouseDown=this.createLazyEvent("mousedown"),this.chartMouseMove=this.createLazyEvent("mousemove"),this.chartMouseUp=this.createLazyEvent("mouseup"),this.chartMouseOver=this.createLazyEvent("mouseover"),this.chartMouseOut=this.createLazyEvent("mouseout"),this.chartGlobalOut=this.createLazyEvent("globalout"),this.chartContextMenu=this.createLazyEvent("contextmenu"),this.chartLegendSelectChanged=this.createLazyEvent("legendselectchanged"),this.chartLegendSelected=this.createLazyEvent("legendselected"),this.chartLegendUnselected=this.createLazyEvent("legendunselected"),this.chartLegendScroll=this.createLazyEvent("legendscroll"),this.chartDataZoom=this.createLazyEvent("datazoom"),this.chartDataRangeSelected=this.createLazyEvent("datarangeselected"),this.chartTimelineChanged=this.createLazyEvent("timelinechanged"),this.chartTimelinePlayChanged=this.createLazyEvent("timelineplaychanged"),this.chartRestore=this.createLazyEvent("restore"),this.chartDataViewChanged=this.createLazyEvent("dataviewchanged"),this.chartMagicTypeChanged=this.createLazyEvent("magictypechanged"),this.chartPieSelectChanged=this.createLazyEvent("pieselectchanged"),this.chartPieSelected=this.createLazyEvent("pieselected"),this.chartPieUnselected=this.createLazyEvent("pieunselected"),this.chartMapSelectChanged=this.createLazyEvent("mapselectchanged"),this.chartMapSelected=this.createLazyEvent("mapselected"),this.chartMapUnselected=this.createLazyEvent("mapunselected"),this.chartAxisAreaSelected=this.createLazyEvent("axisareaselected"),this.chartFocusNodeAdjacency=this.createLazyEvent("focusnodeadjacency"),this.chartUnfocusNodeAdjacency=this.createLazyEvent("unfocusnodeadjacency"),this.chartBrush=this.createLazyEvent("brush"),this.chartBrushEnd=this.createLazyEvent("brushend"),this.chartBrushSelected=this.createLazyEvent("brushselected"),this.chartRendered=this.createLazyEvent("rendered"),this.chartFinished=this.createLazyEvent("finished"),this.animationFrameID=null,this.chart$=new l.t(1),this.resize$=new c.x,this.changeFilter=new z,this.echarts=e.echarts}ngOnChanges(e){this.changeFilter.doFilter(e)}ngOnInit(){if(!window.ResizeObserver)throw new Error("please install a polyfill for ResizeObserver");this.resizeSub=this.resize$.pipe(function T(a,i=p.z,e){const r=(0,E.H)(a,i);return function L(a,i){return(0,d.e)((e,r)=>{const{leading:o=!0,trailing:S=!1}=i??{};let M=!1,A=null,g=null,D=!1;const I=()=>{g?.unsubscribe(),g=null,S&&(F(),D&&r.complete())},x=()=>{g=null,D&&r.complete()},P=v=>g=(0,y.Xf)(a(v)).subscribe((0,_.x)(r,I,x)),F=()=>{if(M){M=!1;const v=A;A=null,r.next(v),!D&&P(v)}};e.subscribe((0,_.x)(r,v=>{M=!0,A=v,(!g||g.closed)&&(o?F():P(v))},()=>{D=!0,(!(S&&M&&g)||g.closed)&&r.complete()}))})}(()=>r,e)}(100,p.z,{leading:!1,trailing:!0})).subscribe(()=>this.resize()),this.autoResize&&(this.resizeOb=this.ngZone.runOutsideAngular(()=>new window.ResizeObserver(()=>{this.animationFrameID=window.requestAnimationFrame(()=>this.resize$.next())})),this.resizeOb.observe(this.el.nativeElement)),this.changeFilter.notFirstAndEmpty("options",e=>this.onOptionsChange(e)),this.changeFilter.notFirstAndEmpty("merge",e=>this.setOption(e)),this.changeFilter.has("loading",e=>this.toggleLoading(!!e)),this.changeFilter.notFirst("theme",()=>this.refreshChart())}ngOnDestroy(){window.clearTimeout(this.initChartTimer),this.resizeSub&&this.resizeSub.unsubscribe(),this.animationFrameID&&window.cancelAnimationFrame(this.animationFrameID),this.resizeOb&&this.resizeOb.unobserve(this.el.nativeElement),this.loadingSub&&this.loadingSub.unsubscribe(),this.changeFilter.dispose(),this.dispose()}ngAfterViewInit(){this.initChartTimer=window.setTimeout(()=>this.initChart())}dispose(){this.chart&&(this.chart.isDisposed()||this.chart.dispose(),this.chart=null)}resize(){this.chart&&this.chart.resize()}toggleLoading(e){this.chart?e?this.chart.showLoading(this.loadingType,this.loadingOpts):this.chart.hideLoading():this.loadingSub=this.chart$.subscribe(r=>e?r.showLoading(this.loadingType,this.loadingOpts):r.hideLoading())}setOption(e,r){if(this.chart)try{this.chart.setOption(e,r)}catch(o){console.error(o),this.optionsError.emit(o)}}refreshChart(){var e=this;return(0,t.Z)(function*(){e.dispose(),yield e.initChart()})()}createChart(){const e=this.el.nativeElement;if(window&&window.getComputedStyle){const r=window.getComputedStyle(e,null).getPropertyValue("height");(!r||"0px"===r)&&(!e.style.height||"0px"===e.style.height)&&(e.style.height="400px")}return this.ngZone.runOutsideAngular(()=>("function"==typeof this.echarts?this.echarts:()=>Promise.resolve(this.echarts))().then(({init:o})=>o(e,this.theme,this.initOpts)))}initChart(){var e=this;return(0,t.Z)(function*(){yield e.onOptionsChange(e.options),e.merge&&e.chart&&e.setOption(e.merge)})()}onOptionsChange(e){var r=this;return(0,t.Z)(function*(){e&&(r.chart||(r.chart=yield r.createChart(),r.chart$.next(r.chart),r.chartInit.emit(r.chart)),r.setOption(r.options,!0))})()}createLazyEvent(e){return this.chartInit.pipe((0,U.w)(r=>new h.y(o=>(r.on(e,S=>this.ngZone.run(()=>o.next(S))),()=>{this.chart&&(this.chart.isDisposed()||r.off(e))}))))}}return a.\u0275fac=function(e){return new(e||a)(s.Y36(C),s.Y36(s.SBq),s.Y36(s.R0b))},a.\u0275dir=s.lG2({type:a,selectors:[["echarts"],["","echarts",""]],inputs:{options:"options",theme:"theme",initOpts:"initOpts",merge:"merge",autoResize:"autoResize",loading:"loading",loadingType:"loadingType",loadingOpts:"loadingOpts"},outputs:{chartInit:"chartInit",optionsError:"optionsError",chartClick:"chartClick",chartDblClick:"chartDblClick",chartMouseDown:"chartMouseDown",chartMouseMove:"chartMouseMove",chartMouseUp:"chartMouseUp",chartMouseOver:"chartMouseOver",chartMouseOut:"chartMouseOut",chartGlobalOut:"chartGlobalOut",chartContextMenu:"chartContextMenu",chartLegendSelectChanged:"chartLegendSelectChanged",chartLegendSelected:"chartLegendSelected",chartLegendUnselected:"chartLegendUnselected",chartLegendScroll:"chartLegendScroll",chartDataZoom:"chartDataZoom",chartDataRangeSelected:"chartDataRangeSelected",chartTimelineChanged:"chartTimelineChanged",chartTimelinePlayChanged:"chartTimelinePlayChanged",chartRestore:"chartRestore",chartDataViewChanged:"chartDataViewChanged",chartMagicTypeChanged:"chartMagicTypeChanged",chartPieSelectChanged:"chartPieSelectChanged",chartPieSelected:"chartPieSelected",chartPieUnselected:"chartPieUnselected",chartMapSelectChanged:"chartMapSelectChanged",chartMapSelected:"chartMapSelected",chartMapUnselected:"chartMapUnselected",chartAxisAreaSelected:"chartAxisAreaSelected",chartFocusNodeAdjacency:"chartFocusNodeAdjacency",chartUnfocusNodeAdjacency:"chartUnfocusNodeAdjacency",chartBrush:"chartBrush",chartBrushEnd:"chartBrushEnd",chartBrushSelected:"chartBrushSelected",chartRendered:"chartRendered",chartFinished:"chartFinished"},exportAs:["echarts"],features:[s.TTD]}),a})(),O=(()=>{class a{static forRoot(e){return{ngModule:a,providers:[{provide:C,useValue:e}]}}static forChild(){return{ngModule:a}}}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=s.oAB({type:a}),a.\u0275inj=s.cJS({}),a})()}}]);
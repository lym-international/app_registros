"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[1472],{1472:(O,f,i)=>{i.r(f),i.d(f,{DashboardLmModule:()=>P});var a=i(4755),p=i(9401),v=i(5626),h=i(8629),Z=i(9085),t=i(2223),u=i(8572),_=i(2986),m=i(1299),g=i(6012),x=i(7081),C=i(3649),b=i(4365);function T(r,d){if(1&r&&(t.TgZ(0,"td",49),t._uU(1),t.qZA()),2&r){const o=t.oxw(2).$implicit,e=t.oxw();t.xp6(1),t.Oqu(e.checkinValues[o.position][o.hourFrom])}}function k(r,d){if(1&r&&(t.TgZ(0,"td"),t._uU(1),t._UZ(2,"mat-progress-bar",58),t.qZA()),2&r){const o=t.oxw(2).$implicit,e=t.oxw();t.xp6(1),t.hij(" ",(e.checkinValues[o.position][o.hourFrom]/o.m*100).toFixed(0)," % "),t.xp6(1),t.Q6J("value",e.checkinValues[o.position][o.hourFrom]/o.m*100)}}function U(r,d){if(1&r&&(t.TgZ(0,"td",49),t._uU(1),t.qZA()),2&r){const o=t.oxw(2).$implicit,e=t.oxw();t.xp6(1),t.Oqu(e.checkOutValues[o.position][o.hourFrom])}}function A(r,d){if(1&r&&(t.TgZ(0,"td"),t._uU(1),t._UZ(2,"mat-progress-bar",59),t.qZA()),2&r){const o=t.oxw(2).$implicit,e=t.oxw();t.xp6(1),t.hij(" ",e.checkinValues[o.position]&&0!==e.checkinValues[o.position][o.hourFrom]?(e.checkOutValues[o.position][o.hourFrom]/e.checkinValues[o.position][o.hourFrom]*100).toFixed(0):"0"," % "),t.xp6(1),t.Q6J("value",e.checkOutValues[o.position][o.hourFrom]/e.checkinValues[o.position][o.hourFrom]*100)}}function q(r,d){if(1&r&&(t.TgZ(0,"td",49),t._uU(1),t.qZA()),2&r){const o=t.oxw(2).$implicit,e=t.oxw();t.xp6(1),t.Oqu(e.noShowValues[o.position][o.hourFrom])}}function M(r,d){if(1&r&&(t.TgZ(0,"tr")(1,"td",49),t._uU(2),t.qZA(),t.TgZ(3,"td",49),t._uU(4),t.qZA(),t.TgZ(5,"td",49),t._uU(6),t.qZA(),t.TgZ(7,"td",49),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t._UZ(11,"mat-progress-bar",56),t.qZA(),t.YNc(12,T,2,1,"td",57),t.YNc(13,k,3,2,"td",55),t.YNc(14,U,2,1,"td",57),t.YNc(15,A,3,2,"td",55),t.YNc(16,q,2,1,"td",57),t.qZA()),2&r){const o=t.oxw().$implicit,e=t.oxw();t.xp6(2),t.Oqu(o.position),t.xp6(2),t.Oqu(e.formatTimeTo12HourFormat(o.hourFrom)),t.xp6(2),t.Oqu(o.quantity),t.xp6(2),t.Oqu(o.m),t.xp6(2),t.hij(" ",(o.m/o.quantity*100).toFixed(0)," % "),t.xp6(1),t.s9C("value",o.m/o.quantity*100),t.xp6(1),t.Q6J("ngIf",e.checkinValues&&e.checkinValues[o.position]&&void 0!==e.checkinValues[o.position][o.hourFrom]),t.xp6(1),t.Q6J("ngIf",e.checkinValues&&e.checkinValues[o.position]&&void 0!==e.checkinValues[o.position][o.hourFrom]),t.xp6(1),t.Q6J("ngIf",e.checkOutValues&&e.checkOutValues[o.position]&&void 0!==e.checkOutValues[o.position][o.hourFrom]),t.xp6(1),t.Q6J("ngIf",e.checkOutValues&&e.checkOutValues[o.position]&&void 0!==e.checkOutValues[o.position][o.hourFrom]),t.xp6(1),t.Q6J("ngIf",e.noShowValues&&e.noShowValues[o.position]&&void 0!==e.noShowValues[o.position][o.hourFrom])}}function w(r,d){if(1&r&&(t.ynx(0),t.YNc(1,M,17,11,"tr",55),t.BQk()),2&r){const o=d.$implicit;t.xp6(1),t.Q6J("ngIf",0!==o.m)}}const y=[{path:"",component:(()=>{class r{constructor(o,e){this.orderDataService=o,this.sharingCloseOrderService=e,this.totalRequest=0,this.porcentajeCheckIn=0,this.porcentajeCheckOut=0,this.porcentajeNoshow=0,this.totalRequeridos=0,this.dataItems=[],this.checkinValues={},this.checkOutValues={},this.noShowValues={}}ngOnInit(){this.dataOrder=this.orderDataService.getSelectedOrder(),this.statusOrder=this.dataOrder.data.status,this.orderId=this.dataOrder.id,console.log("Data: ",this.dataOrder),console.log("OrderID ===>",this.orderId),this.getRegistByOrder(),this.getTotalRequest(),this.sharingCloseOrderService.getStatusOrderObservable().subscribe(o=>{this.statusOrder=o}),console.log("STATUS ORDER en dasboardLm: ",this.statusOrder)}getTotalRequest(){this.dataOrder.data.items&&this.dataOrder.data.items.forEach(e=>{this.totalRequest+=e.quantity}),console.log("Requested: ",this.dataOrder.data.items),this.dataItems=this.dataOrder.data.items;const o={};this.dataOrder.data.items.forEach(e=>{o[e.position]||(o[e.position]=!0,console.log("primera position",e.position))}),this.totalRequeridos=Object.keys(o).length}getRegistByOrder(){fetch(`https://us-central1-highkeystaff.cloudfunctions.net/registrations/registbyOrder/orderId?orderId=${this.orderId}`).then(o=>o.json()).then(o=>{o.employees&&Array.isArray(o.employees)?(this.checkIn=o.employees.filter(n=>!0===n.checkin).length,this.checkOut=o.employees.filter(n=>!0===n.checkout).length,this.noShow=o.employees.filter(n=>"No show"===n.status).length,this.totalConfirmed=o.employees.filter(n=>n.employee&&"Confirmed"===n.employee.status).length,this.porcentajes(this.checkIn,this.checkOut,this.noShow,this.totalConfirmed,this.totalRequest)):console.error("data.employees is not an array or is undefined");const e={};o.employees.forEach(n=>{const s=n.position,c=n.hourFrom,l=n.employee?n.employee.agmRate:n.rate;e[s]||(console.log(`Nueva posici\xf3n encontrada: ${s}`),e[s]={name:s,hours:{}}),e[s].hours[c]||(e[s].hours[c]={totalCheckin:0,totalCheckout:0,totalnoShow:0}),e[s].hours[c].rate=l,n.employee&&"Confirmed"===n.employee.status?(n.checkin&&e[s].hours[c].totalCheckin++,n.checkout&&e[s].hours[c].totalCheckout++,"No show"==n.status&&e[s].hours[c].totalnoShow++):console.log("Manejar el caso en que employee o employee.status est\xe9n indefinidos")}),localStorage.setItem("positions",JSON.stringify(e)),this.checkinValues={},this.checkOutValues={},this.noShowValues={};for(const n in e){const s=e[n];console.log(`Posici\xf3n: ${s.name}`);for(const c in s.hours){const l=s.hours[c];console.log(`Hora inicial: ${c}`),this.checkinValues[n]||(this.checkinValues[n]={}),this.checkOutValues[n]||(this.checkOutValues[n]={}),this.noShowValues[n]||(this.noShowValues[n]={}),void 0!==l.totalCheckin?(this.checkinValues[n][c]=l.totalCheckin,console.log(`Total de check-in: ${l.totalCheckin}`)):(this.checkinValues[n][c]=0,console.log("Total de check-in: 0")),void 0!==l.totalCheckout?(this.checkOutValues[n][c]=l.totalCheckout,console.log(`Total de check-out: ${l.totalCheckout}`)):0===l.totalCheckout&&(this.checkOutValues[n][c]=0,console.log("Total de check-out: 0")),void 0!==l.totalnoShow?(this.noShowValues[n][c]=l.totalnoShow,console.log(`Total de noShow: ${l.totalnoShow}`)):(this.noShowValues[n][c]=0,console.log("Total de noShow: 0")),console.log("---")}}}).catch(o=>{console.log(o)})}formatTimeTo12HourFormat(o){const[e,n]=o.split(":").map(Number);return`${e%12==0?12:e%12}:${n<10?"0":""}${n} ${e<12?"AM":"PM"}`}porcentajes(o,e,n,s,c){0!==this.totalConfirmed?(this.porcentajeCheckIn=Math.round(o/s*100),this.porcentajeCheckOut=Math.round(e/o*100),this.porcentajeNoshow=Math.round(n/s*100),this.porcentajeConfirmed=Math.round(s/c*100),console.log("Porcentaje checkIn: ",this.porcentajeCheckIn),console.log("Porcentaje checkOut: ",this.porcentajeCheckOut),console.log("Porcentaje Noshow: ",this.porcentajeNoshow),console.log("Porcentaje confirmed: ",this.porcentajeConfirmed)):console.log("No es posible calcular los porcentajes. totalConfirmed es cero.")}}return r.\u0275fac=function(o){return new(o||r)(t.Y36(u.U),t.Y36(_.L))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-dashboard-lm"]],decls:149,vars:22,consts:[[1,"content"],[1,"content-block"],[1,"block-header"],[3,"title","active_item"],[1,"container"],[1,"column",2,"padding-top","40px"],[1,"card"],[1,"card-statistic-3"],[1,"card-icon","card-icon-large"],[1,"fa","fa-globe"],[1,"tarjeta"],[1,"clientName"],[1,"colorStatus"],[1,"column",2,"margin","auto"],[1,"sub-column"],[1,"sub-sub-column"],[1,"tarjeta-pequena"],[1,"separador"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12",2,"text-align","center"],[1,"",2,"background-color","#1A202E","color","white","font-size","large","border-radius","8px"],[1,"row"],[1,"col-xl-3","col-lg-6","tarjeta-indicadores"],[1,"card","l-bg-green-dark"],[1,"card-statistic-3",2,"padding-bottom","70px"],[1,"fa","fa-briefcase"],[1,"card-content"],[1,"card-title"],[1,"data-1",2,"padding-bottom","50px"],[1,"card","l-bg-cyan-dark"],[1,"fa","fa-check"],[1,"data-1"],["mode","determinate",1,"progress-m","progress-round","progress-shadow","orange-progress","mt-2","mb-2",3,"value"],[1,"card","l-bg-purple-dark"],["mode","determinate",1,"progress-m","progress-round","progress-shadow","green-progress","mt-2","mb-2",3,"value"],[1,"card","l-bg-orange-dark"],["mode","determinate",1,"progress-m","progress-round","progress-shadow","sky-progress","mt-2","mb-2",3,"value"],["mode","determinate",1,"progress-m","progress-round","progress-shadow","violet-progress","mt-2","mb-2",3,"value"],[2,"color","#004676","width","50%","margin","50px auto 70px auto"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12",2,"padding-right","0px","text-align","center"],[1,"col-xl-2","col-lg-2","col-md-12","col-sm-12",2,"padding-right","0px","text-align","center"],[1,"",2,"background","linear-gradient(135deg, #051e2f 60%, rgb(30, 168, 255) 100%)","color","white","font-size","medium","border-radius","8px"],[1,"row","clearfix",2,"margin-right","0px","margin-left","0px"],[1,"col-xl-12","col-lg-12","col-md-12","col-sm-12"],[1,"header"],[2,"color","#1A202E"],["visibility","hover",2,"height","410px"],[1,"tableBody"],[1,"responsive_table"],[1,"table","table-hover"],[1,"column-check"],["matTooltip","Scheduled time",1,"column-check"],["matTooltip","(Confirmed/Required)*100",1,"column-check"],["matTooltip","(CheckIn/Confirmed)*100",1,"column-check"],["matTooltip","(CheckOut/CheckIn)*100",1,"column-check"],[4,"ngFor","ngForOf"],[4,"ngIf"],["mode","determinate",1,"progress-round","violet-progress",3,"value"],["class","column-check",4,"ngIf"],["mode","determinate",1,"progress-round","green-progress",3,"value"],["mode","determinate",1,"progress-round","orange-progress",3,"value"]],template:function(o,e){1&o&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2),t._UZ(3,"app-breadcrumb",3),t.qZA(),t.TgZ(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8),t._UZ(9,"i",9),t.qZA(),t.TgZ(10,"div",10)(11,"span",11),t._uU(12),t.qZA(),t._UZ(13,"br")(14,"br"),t._uU(15),t._UZ(16,"br")(17,"br"),t._uU(18),t._UZ(19,"br")(20,"br"),t._uU(21),t._UZ(22,"br")(23,"br"),t.TgZ(24,"span",12),t._uU(25),t.qZA()()()()(),t.TgZ(26,"div",13)(27,"div",14)(28,"div",15)(29,"mat-card",16)(30,"mat-card-content")(31,"mat-card-title"),t._uU(32,"Order number"),t.qZA(),t._uU(33),t.qZA()()(),t.TgZ(34,"div",15)(35,"mat-card",16)(36,"mat-card-content")(37,"mat-card-title"),t._uU(38,"Event date"),t.qZA(),t._uU(39),t.qZA()()()()()(),t._UZ(40,"hr",17),t.TgZ(41,"div",18)(42,"mat-card",19)(43,"mat-card-content")(44,"mat-card-title"),t._uU(45,"E M P L O Y E E S"),t.qZA()()()(),t._UZ(46,"br"),t.TgZ(47,"div",20)(48,"div",21)(49,"div",22)(50,"div",23)(51,"div",8),t._UZ(52,"i",24),t.qZA(),t.TgZ(53,"div",25)(54,"h4",26),t._uU(55,"Requested"),t.qZA(),t.TgZ(56,"span",27),t._uU(57),t.qZA()()()()(),t.TgZ(58,"div",21)(59,"div",28)(60,"div",7)(61,"div",8),t._UZ(62,"i",29),t.qZA(),t.TgZ(63,"div",25)(64,"h4",26),t._uU(65,"Confirmed"),t.qZA(),t.TgZ(66,"span",30),t._uU(67),t.qZA(),t._UZ(68,"mat-progress-bar",31),t.qZA()()()(),t.TgZ(69,"div",21)(70,"div",32)(71,"div",7)(72,"div",8),t._UZ(73,"i",29),t.qZA(),t.TgZ(74,"div",25)(75,"h4",26),t._uU(76,"CheckIn"),t.qZA(),t.TgZ(77,"span",30),t._uU(78),t.qZA(),t._UZ(79,"mat-progress-bar",33),t.qZA()()()(),t.TgZ(80,"div",21)(81,"div",34)(82,"div",7)(83,"div",8),t._UZ(84,"i",29),t.qZA(),t.TgZ(85,"div",25)(86,"h4",26),t._uU(87,"CheckOut"),t.qZA(),t.TgZ(88,"span",30),t._uU(89),t.qZA(),t._UZ(90,"mat-progress-bar",35),t.qZA()()()(),t.TgZ(91,"div",21)(92,"div",28)(93,"div",7)(94,"div",8),t._UZ(95,"i",29),t.qZA(),t.TgZ(96,"div",25)(97,"h4",26),t._uU(98,"Noshow"),t.qZA(),t.TgZ(99,"span",30),t._uU(100),t.qZA(),t._UZ(101,"mat-progress-bar",36),t.qZA()()()()(),t._UZ(102,"hr",37),t.TgZ(103,"div",38)(104,"mat-card",19)(105,"mat-card-content")(106,"mat-card-title"),t._uU(107,"P O S I T I O N S"),t.qZA()()()(),t._UZ(108,"br"),t.TgZ(109,"div",39)(110,"mat-card",40)(111,"mat-card-content")(112,"mat-card-title"),t._uU(113),t.qZA()()()(),t._UZ(114,"br"),t.TgZ(115,"div",41)(116,"div",42)(117,"div",6)(118,"div",43)(119,"h2",44),t._uU(120,"Complience by position, hours and employees"),t.qZA()(),t.TgZ(121,"ng-scrollbar",45)(122,"div",46)(123,"div",47)(124,"table",48)(125,"thead")(126,"tr")(127,"th",49),t._uU(128,"Position"),t.qZA(),t.TgZ(129,"th",50),t._uU(130,"Time"),t.qZA(),t.TgZ(131,"th",49),t._uU(132,"Required"),t.qZA(),t.TgZ(133,"th",49),t._uU(134,"Confirmed"),t.qZA(),t.TgZ(135,"th",51),t._uU(136,"Confirmed %"),t.qZA(),t.TgZ(137,"th",49),t._uU(138,"CheckIn"),t.qZA(),t.TgZ(139,"th",52),t._uU(140,"CheckIn %"),t.qZA(),t.TgZ(141,"th",49),t._uU(142,"CheckOut"),t.qZA(),t.TgZ(143,"th",53),t._uU(144,"CheckOut %"),t.qZA(),t.TgZ(145,"th",49),t._uU(146,"Noshow"),t.qZA()()(),t.TgZ(147,"tbody"),t.YNc(148,w,2,1,"ng-container",54),t.qZA()()()()()()()()()()),2&o&&(t.xp6(3),t.Q6J("title","Dashboard")("active_item","Dashboard"),t.xp6(9),t.Oqu(e.dataOrder.data.clientName),t.xp6(3),t.hij(" ",e.dataOrder.data.place," "),t.xp6(3),t.hij(" ",e.dataOrder.data.address," "),t.xp6(3),t.lnq(" ",e.dataOrder.data.city," ",e.dataOrder.data.state," ",e.dataOrder.data.zipcode," "),t.xp6(4),t.hij("Status Order: ",e.statusOrder,""),t.xp6(8),t.hij(" ",e.dataOrder.data.orderId," "),t.xp6(6),t.hij(" ",e.dataOrder.data.startDate," "),t.xp6(18),t.Oqu(e.totalRequest),t.xp6(10),t.Oqu(e.totalConfirmed),t.xp6(1),t.s9C("value",e.porcentajeConfirmed),t.xp6(10),t.Oqu(e.checkIn),t.xp6(1),t.s9C("value",e.porcentajeCheckIn),t.xp6(10),t.Oqu(e.checkOut),t.xp6(1),t.s9C("value",e.porcentajeCheckOut),t.xp6(10),t.Oqu(e.noShow),t.xp6(1),t.s9C("value",e.porcentajeNoshow),t.xp6(12),t.hij("Required: ",e.totalRequeridos,""),t.xp6(35),t.Q6J("ngForOf",e.dataItems))},dependencies:[a.sg,a.O5,m.L,g.a8,g.dn,g.n5,x.pW,C.gM,b.KC],styles:[".tarjeta[_ngcontent-%COMP%]{margin:20px 0;width:80%;color:#5b626b;font-weight:500;font-size:medium}.tarjeta-pequena[_ngcontent-%COMP%]{margin:20px 0;color:#fff;font-weight:500;background:linear-gradient(135deg,#051e2f 60%,rgb(30,168,255) 100%)}.tarjeta-indicadores[_ngcontent-%COMP%]{margin:auto;width:20%}.container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:10px;padding-left:0;padding-right:0}.column[_ngcontent-%COMP%]{padding:10px;vertical-align:super}.sub-column[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;margin-top:-70px;margin-bottom:0}.sub-sub-column[_ngcontent-%COMP%]{display:grid;padding:20px}.column-check[_ngcontent-%COMP%]{text-align:center}.rows[_ngcontent-%COMP%]{--bs-gutter-x: 1.5rem;--bs-gutter-y: 0;display:flex;flex-wrap:wrap;margin-top:calc(-1 * var(--bs-gutter-y));margin-right:calc(-.5 * var(--bs-gutter-x));margin-left:calc(-.5 * var(--bs-gutter-x))}.colorStatus[_ngcontent-%COMP%]{color:#ff9100}.clientName[_ngcontent-%COMP%]{font-size:large;color:#1a202e;font-weight:600;font-size:23px}.separador[_ngcontent-%COMP%]{color:#004676;width:50%;margin:-20px auto 25px}@media (min-width: 767px){.content-block[_ngcontent-%COMP%]{width:100%;padding:10px}.container[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr;padding-left:100px;padding-right:100px}.sub-columns[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.contenedorSM[_ngcontent-%COMP%]{padding-left:5px!important;padding-right:5px!important;margin-left:0!important;margin-right:0!important}.separador[_ngcontent-%COMP%]{color:#004676;width:50%;margin:50px auto 70px}}"]}),r})()}];let V=(()=>{class r{}return r.\u0275fac=function(o){return new(o||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[Z.Bz.forChild(y),Z.Bz]}),r})();var j=i(6205),D=i(787),S=i(8097),I=i(9114);let P=(()=>{class r{}return r.\u0275fac=function(o){return new(o||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({providers:[u.U],imports:[a.ez,p.u5,p.UX,v.K,h.m,V,I.lN,S.c,D.LD,j.X,b.kb]}),r})()},1299:(O,f,i)=>{i.d(f,{L:()=>t});var a=i(2223),p=i(4755),v=i(9085),h=i(1676);function Z(u,_){if(1&u&&(a.TgZ(0,"li",11),a._uU(1),a.qZA()),2&u){const m=_.$implicit;a.xp6(1),a.Oqu(m)}}let t=(()=>{class u{constructor(){}}return u.\u0275fac=function(m){return new(m||u)},u.\u0275cmp=a.Xpm({type:u,selectors:[["app-breadcrumb"]],inputs:{title:"title",items:"items",active_item:"active_item"},decls:14,vars:7,consts:[[1,"breadcrumb-main"],[1,"row"],[1,"col-6"],[1,"breadcrumb-title"],[1,"page-title"],[1,"breadcrumb-list"],[1,"breadcrumb-item","bcrumb-1"],[3,"routerLink"],[3,"icon"],["class","breadcrumb-item",4,"ngFor","ngForOf"],[1,"breadcrumb-item","active"],[1,"breadcrumb-item"]],template:function(m,g){1&m&&(a.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4),a._uU(5),a.qZA()()(),a.TgZ(6,"div",2)(7,"ul",5)(8,"li",6)(9,"a",7),a._UZ(10,"app-feather-icons",8),a.qZA()(),a.YNc(11,Z,2,1,"li",9),a.TgZ(12,"li",10),a._uU(13),a.qZA()()()()()),2&m&&(a.xp6(5),a.Oqu(g.title),a.xp6(4),a.Q6J("routerLink","/admin/search-order"),a.xp6(1),a.Tol("breadcrumb-icon"),a.Q6J("icon","home"),a.xp6(1),a.Q6J("ngForOf",g.items),a.xp6(2),a.Oqu(g.active_item))},dependencies:[p.sg,v.rH,h.A]}),u})()},5626:(O,f,i)=>{i.d(f,{K:()=>v});var a=i(8629),p=i(2223);let v=(()=>{class h{}return h.\u0275fac=function(t){return new(t||h)},h.\u0275mod=p.oAB({type:h}),h.\u0275inj=p.cJS({imports:[a.m]}),h})()}}]);